<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin View Count</title>
</head>

<body>
  <p id="viewCount">Loading...</p>
  <script>
  fetch("http://localhost:5000/admin/views", {
  headers: { "token": "your-secret-token" }
})
  .then(res => res.json())
  .then(data => {
    if (Object.keys(data).length > 0) {
      let content = `
        <h2 style="text-align: center; font-family: Arial, sans-serif;">ðŸŽ¬ Page Views</h2>
        <table style="width: 50%; margin: auto; border-collapse: collapse; font-family: Arial, sans-serif;">
          <thead>
            <tr style="background-color: #4CAF50; color: white;">
              <th style="padding: 10px; border: 1px solid #ddd;">Movie Name</th>
              <th style="padding: 10px; border: 1px solid #ddd;">Views</th>
            </tr>
          </thead>
          <tbody>
      `;

      // Loop through all pages in the data object
      for (const page in data) {
        const movieName = page.replace("/movies/", "").replace(".html", ""); // Remove "/movies/" and ".html"
        content += `
          <tr style="background-color: #f2f2f2; text-align: center;">
            <td style="padding: 10px; border: 1px solid #ddd; font-weight: bold;">${movieName}</td>
            <td style="padding: 10px; border: 1px solid #ddd;">${data[page]} views</td>
          </tr>
        `;
      }

      content += `
          </tbody>
        </table>
      `;

      document.getElementById("viewCount").innerHTML = content;
    } else {
      document.body.innerHTML = "<h2 style='color: red; text-align: center;'>Unauthorized</h2>";
    }
  })
  .catch(err => console.error(err));

  </script>
</body>

</html>